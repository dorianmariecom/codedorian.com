<%= form_for(show_url) do |f| %>
  <% metadata =
    (
      if f.object.errors.include?(:metadata)
        f.object.metadata
      else
        f.object.metadata_json
      end
    ) %>

  <div class="p">
    <%= f.label(:name, class: :label) %>
    <%= f.text_field(:name, class: :input) %>
  </div>

  <div class="p">
    <%= f.label(:hostname, class: :label) %>
    <%= f.text_field(:hostname, class: :input) %>
  </div>

  <div class="p">
    <%= f.label(:kind, class: :label) %>
    <%= f.text_field(:kind, class: :input) %>
  </div>

  <div class="p">
    <%= f.label(:pid, class: :label) %>
    <%= f.number_field(:pid, class: :input) %>
  </div>

  <div class="p">
    <%= f.label(:supervisor_id, class: :label) %>
    <%= f.number_field(:supervisor_id, class: :input) %>
  </div>

  <div class="p">
    <%= f.label(:last_heartbeat_at, class: :label) %>
    <%= f.datetime_field(:last_heartbeat_at, class: :input) %>
  </div>

  <div class="p" data-controller="editor">
    <%= f.label(:metadata, class: :label) %>
    <div class="border border-black rounded overflow-hidden">
      <%= f.hidden_field(:metadata, value: metadata, data: { editor_target: :input }) %>
      <div data-editor-target="editor"></div>
    </div>
    <div class="text-gray-600"><%= Faker::Internet.slug.to_json %></div>
  </div>

  <div class="p">
    <%= f.submit(
      submit,
      class: "button",
      data: {
        controller: "bridge--button",
        bridge__button_title_value: submit
      }
    ) %>
  </div>
<% end %>
