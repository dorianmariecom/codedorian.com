#!/usr/bin/env ruby

require "yaml"

def sort(yaml)
  if yaml.is_a?(Array)
    yaml
      .sort_by { |yaml| yaml.is_a?(Hash) ? yaml["name"].to_s : yaml.to_s }
      .map { |yaml| sort(yaml) }
  elsif yaml.is_a?(Hash)
    yaml.to_h { |key, value| [sort(key), sort(value)] }
  else
    yaml
  end
end

filepath = ARGV.first || "config/documentation.yml"

yaml = YAML.safe_load_file(filepath)

File.write(filepath, sort(yaml).to_yaml)
