#!/usr/bin/env ruby

require "yaml"

def sort(yaml)
  if yaml.is_a?(Array)
    yaml.sort_by do |yaml|
      if yaml.is_a?(Hash)
        yaml["name"].to_s
      else
        yaml.to_s
      end
    end.map do |yaml|
      sort(yaml)
    end
  elsif yaml.is_a?(Hash)
    yaml.to_h { |key, value| [sort(key), sort(value)] }
  else
    yaml
  end
end

filepath = ARGV.first || "config/documentation.yml"

yaml = YAML.safe_load_file(filepath)

File.write(filepath, sort(yaml).to_yaml)
